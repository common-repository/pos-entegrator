import{l as G,S as D,o as d,c as p,h as m,a as e,u as t,D as L,g as y,t as i,s as A,y as $,e as k,f as x,b as w,F as h,j as V,w as C,q as S,n as I,x as R,K as F,av as P,E as Y,ah as M,aw as K,k as H,H as E,d as Q,C as q,ax as W,a2 as Z,ab as J,a7 as X}from"./vendor-3-7-63.js";import{u as N,_ as O,a as ee}from"./Page-3-7-63.js";import{_ as te}from"./TestMode-3-7-63.js";import{a as v}from"./ajax-3-7-63.js";import{a as z,_ as se}from"./OutlineButton-3-7-63.js";import{_ as T}from"./PrimaryButton-3-7-63.js";import{_ as ae}from"./Warning-3-7-63.js";const b=G("GatewayAccount",{state:()=>({gatewayAccount:window.gpos.gateway_account||{},assetsUrl:window.gpos.assets_url||"/"}),actions:{async updateAccountSettings(){const g=await v.post("update_account_settings",{id:this.gatewayAccount.id,gateway_id:this.gatewayAccount.gateway_id,settings:this.gatewayAccount.gateway_settings});this.swal(this.gatewayAccount.gateway_property.save_message.message,this.gatewayAccount.gateway_property.save_message.type),g&&(this.gatewayAccount.id=g.id)},async updateGatewayAccount(){},async updateInstallments(){await v.post("update_installments",{id:this.gatewayAccount.id,installments:this.gatewayAccount.installments}),this.swal(window.gpos.alert_texts.setting_saved)},async resetInstallments(){await v.post("update_installments",{id:this.gatewayAccount.id,installments:!1}),this.swal(window.gpos.alert_texts.setting_saved,"success",()=>{window.location.reload()})},async getInstallments(){const g=await v.post("get_installments_from_api",{id:this.gatewayAccount.id});let n={};g.result==="success"?(this.gatewayAccount.installments=g.installments,n={text:window.gpos.alert_texts.installments_applied,icon:"success"}):n={text:`${window.gpos.alert_texts.installments_get_error} : ${g.installments}`,icon:"error"},this.swal(n.text,n.icon)},async updateInstallmentStatus(){await v.post("update_installment_status",{id:this.gatewayAccount.id,status:this.gatewayAccount.is_installments_active})},async testConnection(){const g=await v.post("check_connection",{id:this.gatewayAccount.id,settings:this.gatewayAccount.gateway_settings});this.swal(g.message,g.result)},async deleteAccount(){await v.post("remove_gateway_account",{id:this.gatewayAccount.id}),this.swal(window.gpos.alert_texts.deletion_completed,"success",()=>{window.location.href="/wp-admin/admin.php?page=gpos-payment-methods"})},swal(g,n="success",s){D.fire({html:g,icon:n,confirmButtonText:window.gpos.alert_texts.ok,confirmButtonColor:"#1A56DB"}).then(s)}}}),le={class:"w-full flex justify-between items-center border border-gray-100 rounded-lg p-5 bg-white shadow-md"},ne={__name:"TestDelete",setup(g){const{deleteAccount:n}=b(),s=()=>{D.fire({html:window.gpos.alert_texts.remove_gateway,icon:"info",confirmButtonText:window.gpos.alert_texts.yes,cancelButtonText:window.gpos.alert_texts.cancel,confirmButtonColor:"#1A56DB",showCancelButton:!0}).then(l=>{l.isConfirmed&&n()})};return(l,u)=>(d(),p("div",le,[m(te),e("button",{id:"gpos-delete-account",class:"text-xs text-red-600 flex gap-1 items-center font-medium",onClick:u[0]||(u[0]=c=>s())},[m(t(L),{class:"w-5 h-5"}),y(i(l.$t("delete_gateway")),1)])]))}},oe={class:"w-full flex flex-wrap"},re={class:"flex gap-1 items-center mb-2"},de={class:"block text-sm font-medium text-gray-900"},ie=["id","onUpdate:modelValue","placeholder"],ce=["id","onUpdate:modelValue","multiple"],ue=["value"],_e={key:2,class:"text-red-500"},pe={__name:"ApiFieldCreator",emits:["validation-errors"],setup(g,{emit:n}){const{isTestMode:s}=A(N()),{gatewayAccount:l}=A(b()),u=n,c=$({}),_=()=>{const o={};l.value.gateway_property.fields.forEach(a=>{const r=l.value.gateway_settings[s.value?`test_${a.model}`:a.model];!r&&r.length===0&&(o[s.value?`test_${a.model}`:a.model]=`${a.label} alanÄ± zorunludur.`)}),Object.keys(o).length>=0&&u("validation-errors",o),c.value=o};return(o,a)=>(d(),p("div",oe,[t(s)?(d(),k(ae,{key:0,class:"m-2 p-2 w-full"},{content:x(()=>[y(i(o.$t("test_mode_content")),1)]),default:x(()=>[y(i(o.$t("test_mode_title"))+" ",1)]),_:1})):w("",!0),(d(!0),p(h,null,V(t(l).gateway_property.fields,(r,f)=>(d(),p("div",{key:f,class:"w-1/2 p-2"},[e("div",re,[e("label",de,i(t(s)?"Test":"")+" "+i(r.label),1)]),r.type==="text"?C((d(),p("input",{key:0,id:`${t(l).gateway_property.id}-${r.model}`,"onUpdate:modelValue":U=>t(l).gateway_settings[t(s)?`test_${r.model}`:r.model]=U,type:"text",class:I(`!bg-gray-50 !border !border-gray-300 !text-gray-900 !text-sm !rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full !p-3 ${t(s)?"placeholder:text-gray-300":"placeholder:text-gray-600"} ${c.value[r.model]?"!border-red-500 focus:ring-red-500 focus:border-red-500":"!border-gray-300"}`),placeholder:r.label,required:"",onInput:_},null,42,ie)),[[S,t(l).gateway_settings[t(s)?`test_${r.model}`:r.model]]]):w("",!0),r.type==="select"?C((d(),p("select",{key:1,id:`${t(l).gateway_property.id}-${r.model}`,"onUpdate:modelValue":U=>t(l).gateway_settings[t(s)?`test_${r.model}`:r.model]=U,multiple:r.multiple,class:"!bg-gray-50 !border !border-gray-300 !text-gray-900 !text-sm !rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full !p-3",onChange:_},[(d(!0),p(h,null,V(r.options,(U,B)=>(d(),p("option",{key:B,value:B},i(U),9,ue))),128))],40,ce)),[[R,t(l).gateway_settings[t(s)?`test_${r.model}`:r.model]]]):w("",!0),c.value[t(s)?`test_${r.model}`:r.model]?(d(),p("span",_e,i(c.value[t(s)?`test_${r.model}`:r.model]),1)):w("",!0)]))),128))]))}},me={key:0},ge={class:"block text-base font-medium text-gray-900 mt-5"},ye=["placeholder"],we={class:"mt-5 p-3 bg-gray-100 border border-gray-300 rounded-lg pt-3"},be={class:"block text-sm font-medium text-gray-900"},xe={class:"block text-base font-semibold text-blue-600"},he={key:1,class:"text-blue-600",textContent:"copied !"},fe={__name:"HexCode",setup(g){const{gatewayAccount:n}=b(),s=$(""),l=$(""),u=()=>{const a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let r="";for(let f=0;f<24;f++)r+=a.charAt(Math.floor(Math.random()*a.length));return r};F(()=>{s.value=u()});const c=()=>{const a=M.util.encodeUtf8(s.value);l.value=M.util.bytesToHex(a)};let _=$(!0);const o=async a=>{await navigator.clipboard.writeText(a),_.value=!1,setTimeout(()=>{_.value=!0},1e3)};return(a,r)=>t(n).gateway_property.id==="garanti"?(d(),p("div",me,[e("label",ge,i(a.$t("hex_code_description")),1),C(e("input",{"onUpdate:modelValue":r[0]||(r[0]=f=>s.value=f),type:"text",maxlength:"24",minlength:"24",placeholder:a.$t("hex_code_placeholder"),class:"!bg-gray-50 !border !border-gray-300 !text-gray-900 !text-base !rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full !p-3 placeholder:text-gray-600 mt-4"},null,8,ye),[[S,s.value]]),m(T,{class:"mt-5",disabled:s.value.length!==24,onClick:c},{default:x(()=>[m(t(P),{class:"w-4 h-4 mr-2"}),y(" "+i(a.$t("hex_code_converter")),1)]),_:1},8,["disabled"]),e("div",we,[e("label",be,i(a.$t("hex_code")),1),e("span",xe,i(l.value),1),l.value.length!=0?(d(),p("span",{key:0,class:"cursor-pointer",onClick:r[1]||(r[1]=f=>o(l.value))},[t(_)?(d(),k(t(Y),{key:0,class:"w-4 h-4 text-blue-600"})):(d(),p("span",he))])):w("",!0)])])):w("",!0)}},$e={class:"w-full flex gap-10 bg-white p-6 rounded-lg shadow-md"},ve={key:0,class:"w-3/5 flex flex-col gap-6"},ke={class:"flex w-full justify-start gap-2 p-2"},Ae={class:"w-2/5"},Ve={class:"w-full flex flex-col gap-2"},Ce={class:"flex justify-between items-start"},Ue=["src"],je=["innerHTML"],Se={class:"flex flex-row space-x-5"},Te=["href"],Ie=["href"],Be={__name:"ApiFields",setup(g){const{testConnection:n,updateAccountSettings:s}=b(),{gatewayAccount:l}=b(),u=$({}),c=$(!0);function _(a){u.value=a,c.value=!1}const o=()=>l.gateway_property.id!=="dummy_payment"?!1:!(!c.value&&Object.keys(u.value).length===0);return(a,r)=>(d(),p("div",$e,[t(l).gateway_property.id!=="dummy_payment"?(d(),p("div",ve,[m(pe,{onValidationErrors:_}),e("div",ke,[t(l).gateway_property.check_connection_is_available?(d(),k(z,{key:0,onClick:t(n)},{default:x(()=>[m(t(K),{class:"w-4 h-4 mr-2"}),y(i(a.$t("connect_test")),1)]),_:1},8,["onClick"])):w("",!0),m(T,{id:"gpos-save-settings",disabled:o(),onClick:r[0]||(r[0]=f=>t(s)())},{default:x(()=>[m(t(H),{class:"w-4 h-4 mr-2"}),y(i(a.$t("save_settings")),1)]),_:1},8,["disabled"])])])):w("",!0),e("div",Ae,[e("div",Ve,[e("div",Ce,[e("img",{class:"w-1/4",src:t(l).gateway_property.logo},null,8,Ue)]),e("p",{class:"text-lg text-gray-500",innerHTML:a.$t(`${t(l).gateway_id}.description`)},null,8,je),e("div",Se,[e("a",{href:t(l).gateway_property.merchant_panel,target:"_blank",class:"mt-2 text-blue-700 text-sm flex gap-1 items-center"},[y(i(a.$t("merchant_panel")),1),m(t(E),{class:"w-3 h-3 text-blue-700"})],8,Te),t(l).gateway_property.help_document?(d(),p("a",{key:0,href:t(l).gateway_property.help_document,target:"_blank",class:"mt-2 text-blue-700 text-sm flex gap-1 items-center"},[y(i(a.$t("help_document")),1),m(t(E),{class:"w-3 h-3 text-blue-700"})],8,Ie)):w("",!0)])]),m(fe)])]))}},Me={__name:"AutoFill",setup(g){const{getInstallments:n,gatewayAccount:s}=b();return(l,u)=>t(s).gateway_property.supports.includes("installment_api")?(d(),k(z,{key:0,onClick:u[0]||(u[0]=c=>t(n)())},{default:x(()=>[y(i(l.$t("get_installment_rates")),1)]),_:1})):w("",!0)}},Ee={class:"flex"},De={class:"!bg-gray-200 !border !border-r-0 !border-gray-300 !text-gray-900 !text-md !rounded-l-md p-1 w-1/4 text-center font-semibold"},Fe=["disabled"],j={__name:"InstallmentInput",props:{modelValue:{type:[String,Number],required:!0},placeholder:{type:String,default:""},required:{type:Boolean,default:!1},label:{type:String,default:""},rate:{type:Object,required:!0}},emits:["update:modelValue"],setup(g,{emit:n}){const s=g,l=n,u=Q({get(){return s.modelValue},set(c){l("update:modelValue",c)}});return(c,_)=>(d(),p("div",Ee,[e("div",De,i(g.label),1),C(e("input",{"onUpdate:modelValue":_[0]||(_[0]=o=>u.value=o),disabled:!g.rate.enabled,type:"text",style:{"border-radius":"0 !important"},class:I(`!border !border-l-0 !border-gray-300 !text-gray-900 !text-sm !rounded-r-md w-3/4 ${g.rate.enabled?"!bg-white":"!bg-gray-200"}`)},null,10,Fe),[[S,u.value]])]))}},He={class:"flex flex-col gap-2 justify-center rounded-lg p-2 bg-slate-200"},qe={class:"border text-left !rounded-lg bg-white"},Ne={class:"px-2 py-1 w-1/12"},ze={class:"px-2 py-1 w-1/12"},Ge=["onUpdate:modelValue"],Le={class:"px-2 py-1 w-5/12"},Re={class:"px-2 py-1 w-5/12"},Pe={class:"flex gap-4 h-8 justify-center"},Ye={__name:"ApplyAll",setup(g){const{gatewayAccount:n}=A(b()),s=$([{number:2,enabled:!1,rate:"",extra:""},{number:3,enabled:!1,rate:"",extra:""},{number:4,enabled:!1,rate:"",extra:""},{number:5,enabled:!1,rate:"",extra:""},{number:6,enabled:!1,rate:"",extra:""},{number:7,enabled:!1,rate:"",extra:""},{number:8,enabled:!1,rate:"",extra:""},{number:9,enabled:!1,rate:"",extra:""},{number:10,enabled:!1,rate:"",extra:""},{number:11,enabled:!1,rate:"",extra:""},{number:12,enabled:!1,rate:"",extra:""}]),l=()=>{Object.keys(n.value.installments).forEach(u=>{s.value.forEach(c=>{n.value.installments[u][c.number].enabled=c.enabled,n.value.installments[u][c.number].rate=c.rate,n.value.installments[u][c.number].extra=c.extra})})};return(u,c)=>(d(),p("div",He,[e("table",qe,[(d(!0),p(h,null,V(s.value,_=>(d(),p("tr",{key:_.number,class:"border-b"},[e("td",Ne,i(_.number),1),e("td",ze,[C(e("input",{"onUpdate:modelValue":o=>_.enabled=o,type:"checkbox",class:"text-blue-600 bg-gray-100 border-gray-300 rounded"},null,8,Ge),[[q,_.enabled]])]),e("td",Le,[m(j,{modelValue:_.rate,"onUpdate:modelValue":o=>_.rate=o,rate:_,label:"%"},null,8,["modelValue","onUpdate:modelValue","rate"])]),e("td",Re,[m(j,{modelValue:_.extra,"onUpdate:modelValue":o=>_.extra=o,rate:_,label:"+"},null,8,["modelValue","onUpdate:modelValue","rate"])])]))),128))]),e("div",Pe,[e("div",{class:"py-2 px-3 bg-white text-blue-600 rounded-lg border border-blue-600 flex justify-center items-center cursor-pointer",onClick:c[0]||(c[0]=_=>l())},i(u.$t("apply_all")),1)])]))}},Ke={class:"w-full grid grid-cols-4 gap-6"},Qe={class:"flex gap-4 h-8"},We=["src"],Ze={class:"px-2 py-1 w-10/12 font-semibold text-center"},Je={class:"border text-left !rounded-lg bg-white"},Xe={class:"px-2 py-1 w-1/12"},Oe={class:"px-2 py-1 w-1/12"},et=["onUpdate:modelValue"],tt={class:"px-2 py-1 w-5/12"},st={class:"px-2 py-1 w-5/12"},at={__name:"RateTable",setup(g){const{gatewayAccount:n,assetsUrl:s}=A(b());return(l,u)=>(d(),p("div",Ke,[m(Ye),(d(!0),p(h,null,V(t(n).installments,(c,_)=>(d(),p("div",{key:_,class:"flex flex-col gap-2 rounded-lg p-2 bg-slate-200"},[e("div",Qe,[e("img",{src:`${t(s)}/images/card/${_}.svg`,class:"rounded-lg w-8 h-8"},null,8,We),e("div",Ze,i(l.$t(_)),1)]),e("table",Je,[(d(!0),p(h,null,V(c,o=>(d(),p("tr",{key:o.number,class:"border-b"},[e("td",Xe,i(o.number),1),e("td",Oe,[C(e("input",{"onUpdate:modelValue":a=>o.enabled=a,type:"checkbox",class:"text-blue-600 bg-gray-100 border-gray-300 rounded"},null,8,et),[[q,o.enabled]])]),e("td",tt,[m(j,{modelValue:o.rate,"onUpdate:modelValue":a=>o.rate=a,rate:o,label:"%"},null,8,["modelValue","onUpdate:modelValue","rate"])]),e("td",st,[m(j,{modelValue:o.extra,"onUpdate:modelValue":a=>o.extra=a,rate:o,label:"+"},null,8,["modelValue","onUpdate:modelValue","rate"])])]))),128))])]))),128))]))}},lt={class:"w-full flex flex-col gap-6 bg-white p-6 rounded-lg shadow-md"},nt={class:"text-2xl w-full flex justify-between font-bold text-[#111928]"},ot={class:"w-full flex items-center justify-between"},rt={key:0,class:"flex gap-4"},dt={class:"text-red-600 font-semibold"},it={class:"flex gap-2 justify-between items-end"},ct={class:"flex items-center gap-4"},ut={__name:"Installments",setup(g){const{gatewayAccount:n}=A(b()),{updateInstallmentStatus:s,updateInstallments:l,resetInstallments:u}=b(),c=$(!1),_=()=>{c.value=!0,setTimeout(()=>{c.value=!1},2e3)};return(o,a)=>(d(),p("div",lt,[e("div",nt,[y(i(o.$t("installment_options"))+" ",1),m(O,{video:"https://www.youtube.com/watch?v=hhMeZ6rx78Y"})]),e("div",ot,[m(se,{modelValue:t(n).is_installments_active,"onUpdate:modelValue":a[0]||(a[0]=r=>t(n).is_installments_active=r),onChange:a[1]||(a[1]=r=>t(s)())},{default:x(()=>[y(i(o.$t("activate_installment")),1)]),_:1},8,["modelValue"]),t(n).is_installments_active?(d(),p("div",rt,[m(Me),m(T,{class:"w-max",onClick:a[2]||(a[2]=r=>t(l)())},{default:x(()=>[m(t(H),{class:"w-4 h-4 mr-2"}),y(" "+i(o.$t("save_installment_rates")),1)]),_:1})])):w("",!0)]),t(n).is_installments_active?(d(),p(h,{key:0},[e("div",null,[y(i(o.$t("installments_desc"))+" ",1),a[5]||(a[5]=e("br",null,null,-1)),a[6]||(a[6]=y()),e("span",dt,i(o.$t("note"))+" :",1),y(" "+i(o.$t("extra_installment_desc")),1)]),m(at),e("div",it,[e("div",ct,[e("div",{class:"cursor-pointer",onClick:a[3]||(a[3]=r=>_())},i(o.$t("reset_installments")),1),e("span",{class:I(`${c.value?"animate-ping ":""}text-red-600 underline cursor-pointer mr-4`),onClick:a[4]||(a[4]=r=>t(u)())},i(o.$t("reset_settings")),3)])])],64)):w("",!0)]))}},_t={class:"bg-white p-6 rounded-lg shadow-md flex flex-col gap-3"},pt={class:"text-2xl font-bold text-[#111928]"},mt={class:"w-full flex flex-wrap gap-5 mt-4"},gt={class:"text-base"},yt={class:"text-2xl font-bold text-[#111928]"},wt={class:"flex items-center flex-wrap break-words bg-gray-50 rounded-lg py-4 px-3"},bt={class:"flex gap-2 items-center"},xt={class:"text-xs text-gray-900 font-medium"},ht={__name:"Supports",setup(g){const{gatewayAccount:n}=b();return(s,l)=>(d(),p("div",_t,[t(n).gateway_property.supports.length?(d(),p(h,{key:0},[e("span",pt,i(s.$t("supports_features")),1),e("div",mt,[(d(!0),p(h,null,V(t(n).gateway_property.supports,(u,c)=>(d(),p("div",{key:c,class:"w-72 flex justify-between py-4 px-3 bg-gray-50 rounded-lg items-center"},[e("span",gt,i(s.$t(u)),1),m(t(W),{class:"w-6 h-6 text-green-300"})]))),128))])],64)):w("",!0),e("span",yt,i(s.$t("supports_currency")),1),e("div",wt,[e("div",bt,[m(t(Z),{class:"w-5 h-5 text-gray-900"}),e("span",xt,i(t(n).gateway_property.currencies.join(", ")),1)])])]))}},ft={class:"bg-white p-6 rounded-lg shadow-md flex flex-col gap-3"},$t={class:"text-2xl font-bold text-[#111928]"},vt={class:"flex gap-3"},kt={class:"flex"},At=["onUpdate:modelValue"],Vt={class:""},Ct={__name:"WorldPAYExtra",setup(g){const{updateAccountSettings:n}=b(),{gatewayAccount:s}=A(b());return F(()=>{typeof s.value.gateway_settings.installments=="string"&&(s.value.gateway_settings.installments={2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",10:"",11:"",12:""})}),(l,u)=>(d(),p("div",ft,[e("span",$t,i(l.$t("installment_options")),1),e("div",vt,[(d(!0),p(h,null,V(t(s).gateway_settings.installments,(c,_)=>(d(),p("div",{key:_,class:"flex items-center flex-col"},[e("span",null,i(_),1),e("div",kt,[u[0]||(u[0]=e("div",{class:"!bg-gray-200 !border !border-r-0 !border-gray-300 !text-gray-900 !text-md !rounded-l-md p-1"}," % ",-1)),C(e("input",{"onUpdate:modelValue":o=>t(s).gateway_settings.installments[_]=o,type:"text",style:{"border-radius":"0 !important"},class:"!border !border-l-0 !border-gray-300 !text-gray-900 !text-sm !rounded-r-md w-12 !bg-white"},null,8,At),[[S,t(s).gateway_settings.installments[_]]])])]))),128))]),e("span",Vt,i(l.$t(`${t(s).gateway_id}.installment_desc`)),1),e("div",null,[m(T,{id:"gpos-save-settings",onClick:t(n)},{default:x(()=>[y(i(l.$t("save_settings")),1)]),_:1},8,["onClick"])])]))}},Ut={class:"text-blue-600 text-md"},jt={class:"w-full flex flex-col gap-6"},Ft={__name:"App",setup(g){const{gatewayAccount:n}=A(b()),{paymentGateways:s}=N();J(()=>{n.value.gateway_property=s.find(c=>c.id===n.value.gateway_id);const u=window.jQuery;u("#toplevel_page_gurmepos").addClass("wp-has-current-submenu"),u(".toplevel_page_gurmepos").addClass("wp-has-current-submenu"),u("a[href='admin.php?page=gpos-payment-methods']").parent("li").addClass("current")});const l=()=>{window.history.back()};return(u,c)=>(d(),k(ee,{text:t(n).gateway_property.title,href:`https://yardim.gurmehub.com/docs/pos-entegrator/odeme-yontemleri/${t(n).gateway_property.id}-sanal-pos-ayarlar/`},{default:x(()=>[e("span",{class:"w-max flex gap-1 items-center my-4 cursor-pointer",onClick:l},[m(t(X),{class:"text-blue-600 w-6 h-6"}),e("span",Ut,i(u.$t("back_to")),1)]),e("div",jt,[m(ne),m(Be),t(n).gateway_property.id==="worldpay"?(d(),k(Ct,{key:0})):w("",!0),t(n).gateway_property.payment_method_type==="virtual_pos"?(d(),k(ut,{key:1})):w("",!0),m(ht)])]),_:1},8,["text","href"]))}};export{Ft as _};
